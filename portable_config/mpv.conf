# ===================================================================
# Profiles and Advanced Settings
# ===================================================================
# Include external profiles configuration.
include="~~/profiles.conf"

# ===================================================================
# General
# ===================================================================
# Start mpv with a window size of 75% of the screen's dimensions.
autofit=75%x75%
# Keep the player window open after playback finishes.
keep-open=yes
# Pre-scan files to allow seeking in non-seekable formats or streams.
force-seekable=yes
# Use shift+q to quit instead when you need to continue later.
# save-position-on-quit
# save position and selected subs
watch-later-options=start,sid
# Use colored and detailed console messages for better debugging &  display a progress bar on the terminal.
msg-color=yes
msg-module=yes
term-osd-bar=yes
# Display images indefinitely instead of treating them like short videos.
image-display-duration=inf
# Allow seeking to exact frames, not just keyframes.
hr-seek=yes
# Do not use mpv's default keybindings (requires a custom input.conf).
input-default-bindings=no
# Automatically load external audio files with similar names.
audio-file-auto=fuzzy
# Automatically load external subtitle files with similar names.
sub-auto=fuzzy
# Reset pause mode when switching to the next file.
reset-on-next-file=pause
# Create a playlist from the parent directory with files matching --directory-filter-types.
autocreate-playlist=filter
# Switches the D3D11 swap chain fullscreen state to 'fullscreen' when fullscreen video is requested. Also known as "exclusive fullscreen".
d3d11-exclusive-fs=yes

# ===================================================================
# Video & Performance
# ===================================================================
# Profile from profiles.conf to be loaded at startup.
profile=HighQuality
# Use the modern 'gpu-next' video output driver for better quality and performance.
vo=gpu-next
# Preferred GPU API order. Vulkan is generally best on Linux/Windows.
gpu-api=vulkan
# Hardware video decoding. 'auto' is often more efficient than 'auto-copy'.
hwdec=vulkan
# Set output dither depth depending on your display
dither-depth=10
dither-size-fruit=6
dither=fruit
temporal-dither=yes
temporal-dither-period=3
# Deinterlacing is off by default, as most content is progressive. (enable using shortcut)
deinterlace=no
# Specifies the algorithm used for tone-mapping images onto the target display.
tone-mapping=bt.2446a
# Automatically select the ICC display profile currently specified by the display settings of the operating system.
icc-profile-auto
# Enables the use of async compute queues on supported vulkan devices
vulkan-async-compute=yes
# Enables the use of async transfer queues on supported vulkan devices.
vulkan-async-transfer=yes
# Controls the number of VkQueues used for rendering (limited by how many your device supports).
vulkan-queue-count=1
# Enable direct rendering https://mpv.io/manual/stable/#options-vd-lavc-dr
vd-lavc-dr=yes
# full range (0-255 per component), PC levels
video-output-levels=full
# ===================================================================
# Cache & Streaming
# ===================================================================
# Enable caching for network streams.
cache=auto
# Maximum demuxer readahead for network streams.
demuxer-readahead-secs=120
# Maximum size of the cache.
demuxer-max-bytes=500MiB
# Limit the size of data the demuxer can store after reading
demuxer-max-back-bytes=250MiB
# Don't pause when the cache runs out of data.
cache-pause=no

# yt-dlp (youtube-dl) format selection for 1080p.
ytdl-format=bestvideo[height<=?1080]+bestaudio/best[height<=?1080]
# Pass raw options to yt-dlp.
ytdl-raw-options=sub-lang="vi.*,en.*"
# Use maximum available bitrate for HLS streams.
hls-bitrate=max
# Allow loading of potentially unsafe playlists.
load-unsafe-playlists=yes


# ===================================================================
# UI & OSD (On-Screen Display)
# ===================================================================
# Disable the default OSC and OSD bar, likely for a custom script.
osc=no
osd-bar=no
# Remove window border/title bar.
border=no
# Hide Cursor in Fullscreen only
cursor-autohide-fs-only=yes
# Hide mouse cursor after 100ms of inactivity.
cursor-autohide=100
# enabled (shows up only on user interaction)
osd-level=1

# OSD message styling
osd-font="FiraCode Nerd Font"
osd-font-size=36
osd-bold=yes
osd-duration=1000
osd-shadow-offset=0.75
osd-outline-size=1.5

# ===================================================================
# Audio
# ===================================================================
# Default volume at startup.
volume=100
# Maximum volume level (values >100 use software amplification).
volume-max=200
# Adjust audio pitch to sound normal when changing playback speed.
audio-pitch-correction=yes

# ===================================================================
# Subtitles
# ===================================================================
# Enabling this will make the player select streams according to --aid, --alang, and others.
track-auto-selection=yes
# Language priority for audio and subtitles.
alang=jp,jpn,en,eng
slang=en,eng,jp,jpn,und


# Attempt to fix subtitle timing on seeks in MKV files.
demuxer-mkv-subtitle-preroll=yes
# Do not try to fix subtitle gaps automatically.
sub-fix-timing=no

# Search for subtitles in these subdirectories.
sub-file-paths=ass;srt;sub;subs;subtitles;Subs

# Styling for text-based subtitles (SRT, VTT, etc.)
sub-font="Netflix Sans Med"
sub-font-size=37
sub-color='#FFFFFFFF'
sub-border-color="#FF000000"
sub-border-size=2.0
sub-shadow-color=0.0/0.0/0.0/0.70
sub-shadow-offset=0.75
sub-spacing=1.0
sub-bold=yes
sub-blur=0.3
sub-use-margins=no

# Use fonts embedded within media files for styled subtitles (ASS/SSA).
embeddedfonts=yes
# Prevent ASS subtitle styles from scaling with the window size.
sub-ass-scale-with-window=no

# Trying to fix ugly DVD subtitles
#sub-gray
sub-gauss=0.9

# ===================================================================
# Debanding
# ===================================================================
# Debanding is disabled by default but can be toggled.
deband=no
deband-iterations=4
deband-threshold=164
deband-range=6
deband-grain=5

# ===================================================================
# Interpolation
# ===================================================================
# Temporal scaler for smooth motion when changing playback speed.
tscale=sphinx
tscale-blur=0.6991556596428412
tscale-radius=1.05
tscale-clamp=0.0

# ===================================================================
# Screenshot
# ===================================================================
screenshot-format=png
screenshot-high-bit-depth=yes
screenshot-tag-colorspace=yes
screenshot-png-compression=4
screenshot-dir="~/Pictures/mpv"
screenshot-template="%{?demuxer-via-network==yes:${media-title}%{?demuxer-via-network==yes:_${filename/no-ext}%{!demuxer-via-network==yes:${filename}-%wH.%wM.%wS.%wT-#%#00n"





